-- -----------------------------------------------------
-- Sprint 25
-- -----------------------------------------------------
-- ILT-315 - Start ------------------------------------

SET AUTOCOMMIT=0;


ALTER TABLE `caseresult`
	ADD COLUMN `errorCode` VARCHAR(100) NULL AFTER `message`,
	ADD COLUMN `stacktrace` LONGTEXT NULL AFTER `errorCode`;

COMMIT;

 -- ILT-315 - End ------------------------------------

 
 -- -----------------------------------------------------
-- Sprint 25
-- -----------------------------------------------------
-- ILT-320 - Start ------------------------------------

ALTER TABLE `participant` ADD COLUMN `version` VARCHAR(45) NOT NULL DEFAULT 'Connect_2.4.8' COMMENT 'Gateway version of the participant system.'  AFTER `ipAddress` ;

ALTER TABLE `testharnessri` ADD COLUMN `participatingId` INT(10) NOT NULL AFTER `testharnessId`   ;

UPDATE `testharnessri` SET `participatingId`=1 WHERE `testharnessId`='1';

UPDATE `testharnessri` SET `participatingId`=2 WHERE `testharnessId`='2';

UPDATE `testharnessri` SET `participatingId`=3 WHERE `testharnessId`='3';

UPDATE `testharnessri` SET `participatingId`=4 WHERE `testharnessId`='4';

COMMIT;

-- The data must be updated with the connect 3.2 server information
INSERT INTO `testharnessri` (`testharnessId`, `participatingId`, `name`, `version`, `communityId`, `assigningAuthorityId`, `ipAddress`, `createuser`, `changeduser`) VALUES (5, 1, 'RI1', 'Connect_3.2', '2.16.840.1.113883.0.101', '2.16.840.1.113883.0.101', 'd33RKGH1.aegis.net', 'richard.ettema', 'richard.ettema');

INSERT INTO `testharnessri` (`testharnessId`, `participatingId`, `name`, `version`, `communityId`, `assigningAuthorityId`, `ipAddress`, `createuser`, `changeduser`) VALUES (6, 2, 'RI2', 'Connect_3.2', '2.16.840.1.113883.0.102', '2.16.840.1.113883.0.102', 'dfrh0fh1.aegis.net', 'richard.ettema', 'richard.ettema');

UPDATE `testharnessri` SET `version`='Connect_2.4.8' WHERE `testharnessId`='1';

UPDATE `testharnessri` SET `version`='Connect_2.4.8' WHERE `testharnessId`='2';

UPDATE `testharnessri` SET `version`='Connect_2.4.8' WHERE `testharnessId`='3';

UPDATE `testharnessri` SET `version`='Connect_2.4.8' WHERE `testharnessId`='4';

UPDATE `testharnessri` SET `version`='Connect_3.2' WHERE `testharnessId`='5';

UPDATE `testharnessri` SET `version`='Connect_3.2' WHERE `testharnessId`='6';

COMMIT;


ALTER TABLE `servicesetexecution` ADD COLUMN `Version` VARCHAR(45) NOT NULL  DEFAULT 'Connect_2.4.8' AFTER `endTime`  ;

ALTER TABLE `caseexecution` ADD COLUMN `version` VARCHAR(45) NOT NULL DEFAULT 'Connect_2.4.8'  AFTER `status` ;


INSERT INTO `testharnessendpoint` (`testharnessendpointId`,`testharnessId`,`messageType`,`endpoint`) VALUES 

(13, 5, 'PD', 'http://d33RKGH1.aegis.net:8080/CONNECTAdapter/EntityPatientDiscovery'),
(14, 5, 'QD', 'http://d33RKGH1.aegis.net:8080/CONNECTAdapter/EntityDocQuery'),
(15, 5, 'RD', 'http://d33RKGH1.aegis.net:8080/CONNECTAdapter/EntityDocRetrieve'),

(16, 6, 'PD', 'http://dfrh0fh1.aegis.net:8080/CONNECTAdapter/EntityPatientDiscovery'),
(17, 6, 'QD', 'http://dfrh0fh1.aegis.net:8080/CONNECTAdapter/EntityDocQuery'),
(18, 6, 'RD', 'http://dfrh0fh1.aegis.net:8080/CONNECTAdapter/EntityDocRetrieve');

COMMIT;


INSERT INTO `serviceset` (`setId`,`setName`,`initiatorAllowedInd`,`responderAllowedInd`,`ssnHandlingInd`,`status`,`labAccessFilter`,`createtime`,`createuser`,`changedtime`,`changeduser`) VALUES 
 (4,'Patient and Document - 3.2 Gateway','Y','Y','Y','ACTIVE',2,NULL,'richard.ettema',NULL,'richard.ettema');
 COMMIT;
 
INSERT INTO `scenario` (`scenarioId`,`setId`,`scenarioName`,`quickName`,`description`,`conditionDescription`,`status`,`initiatorInd`,`responderInd`,`ssnHandlingInd`,`createtime`,`createuser`,`changedtime`,`changeduser`) VALUES 
(2001,4,'Scenario 1','Discover, query, retrieve docs on Marta Marquez from test node 1.','Request information on Marta Marquez\'s (F, DOB 10/1/1970) medical history from Node 1.  Retrieve all documents found.','Query for MM at RI1. Query for docs at RI1. Retrieve docs from RI1.','ACTIVE','Y','N','N',NULL,'richard.ettema',NULL,'richard.ettema'),
(2002,4,'Scenario 5','Lab discovers, queries, and retrieves 1 of 2 documents for Heather L. Williams.','Node 1 seeks information on Heather L. Williams (F, DOB 5/25/1970), then retrieves only one doc.','MANUAL CHECK required for validation. Requesting RI receives single document with the data-fed information.  After retrieve, manually check that it is the correct doc (has expected information) - some candidates might have converted doc to their internal format.','ACTIVE','N','Y','N',NULL,'richard.ettema',NULL,'richard.ettema'),
(2003,4,'Scenario 29','Discover, query, retrieves docs for Robert Winchester from test node 1; expect responder errors on retrieve.','Seek information on Robert Winchester\'s medical history from Node 1 (M, DOB: 2/8/1966). After querying for documents, attempt to retrieve each document individually. Note: This scenario verifies two conditions: - That the candidate gateway can retrieve invalid documents without interfering with its operation.  This behavior is required. To verify this condition, the candidate must provide a gateway audit log that includes the retrieve. - That the candidate system can validate retrieved documents.  This behavior is optional. To verify this condition, the candidate may provide some kind of system log that shows this validation took place and the results.  If no such log is attached, this condition will not be checked. Attached log(s) will be verified by the NHIN Validating Body.','MANUAL CHECK required for validation. We review their logs - interop system should note that they should \"turn on\" their log, and bundle it up and upload it. NHIN validation body reviews it. Our goal is to make sure their system does not crash on any of these error messages. What the candidate system DOES with the errors is outside of our scope.','ACTIVE','Y','N','N',NULL,'richard.ettema',NULL,'richard.ettema'),
(2004,4,'Scenario 30','Lab retrieves a document a second time.','Node 1 retrieves the document it already got on Heather L. Williams again, in order to compare it. Note: This scenario applies only to candidate systems that 1) dynamically generate documents, 2) have an expiration time for unused document references, e.g. references that have been returned in a query but not yet retrieved, and 3) support configuration of this expiration time. Setup: 1) Prior to all testing the Candidate should configure their system with an expiration of 5 minutes.  After test is complete (this could be after the whole suite of RD tests) restore the previous timeout. 2) The candidate will have run Scenario 5 before this. 3) From the time Scenario 5 was executed, wait > 5 minutes to execute this test.','TEST HARNESS: Response and document match identically what was retrieved in Scenario 5, RDR-3.1.','ACTIVE','N','Y','N',NULL,'richard.ettema',NULL,'richard.ettema'),
(2005,4,'Scenario 45','Lab queries for patient Charles Brown [with multiple names aka Charles Bronsternak]; query for deprecated document','Node 1 queries for information on the medical history of Charles Brown\'s (M, DOB 10/10/1983), a patient with multiple names, then retrieves a deprecated document. Setup: For dynamic document HIEs, must first persist the document and then change its status to deprecated.','MANUAL CHECK required for validation. Node 1 asks for (TBD).  Expect to receive 1 doc in query. Expect to receive 1 doc on a retrieve query. After retrieve, manually check that it is the correct doc (has expected information) - some candidates might have converted doc to their internal format.','ACTIVE','N','Y','N',NULL,'richard.ettema',NULL,'richard.ettema');

COMMIT;

INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2001, 1, NULL, '00037', NULL, '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataPD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 1</scenarioName>\n            <testCaseName>PDI-1.1c</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 1 PDI-1.1c</userName>\n        <patientId>CAN20000037</patientId>\n        <patientPrefix>Ms</patientPrefix>\n        <patientLastName>Marquez</patientLastName>\n        <patientGivenName>Marta</patientGivenName>\n        <patientGender>F</patientGender>\n        <patientDateOfBirth>19701001</patientDateOfBirth>\n        <patientSsn></patientSsn>\n        <patientTel></patientTel>\n        <patientStreetAddress></patientStreetAddress>\n        <patientCity></patientCity>\n        <patientState></patientState>\n        <patientZip></patientZip>\n    </patientPD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2001, 27, NULL, '00037', '1.RI1.101.00037.11111~~1.RI1.101.00037.22222~~1.RI1.101.00037.33333', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientQD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataQD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 1</scenarioName>\n            <testCaseName>QDI-1.1</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 1 QDI-1.1</userName>\n        <initiatorPatientId>CAN20000037</initiatorPatientId>        \n        <responderPatient>\n            <responderPatientId>RI1.101.00037</responderPatientId>\n        </responderPatient>\n        <documentParams>\n            <creationTimeInd>N</creationTimeInd>\n            <creationTimeFrom>03/20/2007</creationTimeFrom>\n            <creationTimeTo>05/20/2010</creationTimeTo>\n            <serviceStartTimeInd>N</serviceStartTimeInd>\n            <serviceStartTimeFrom>01/20/2007</serviceStartTimeFrom>\n            <serviceStartTimeTo>03/20/2007</serviceStartTimeTo>\n            <serviceStopTimeInd>N</serviceStopTimeInd>\n            <serviceStopTimeFrom>02/20/2007</serviceStopTimeFrom>\n            <serviceStopTimeTo>04/20/2007</serviceStopTimeTo>\n            <classCodeInd>N</classCodeInd>\n            <classCodeList>\n                <classCode>34133-9^^2.16.840.1.113883.6.1</classCode>\n            </classCodeList>\n            <statusInd>Y</statusInd>\n            <statusList>\n                <status>urn:oasis:names:tc:ebxml-regrep:StatusType:Approved</status>\n            </statusList>\n        </documentParams>\n    </patientQD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2001, 85, NULL, '00037', '1.RI1.101.00037.11111~~1.RI1.101.00037.22222~~1.RI1.101.00037.33333', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientRD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataRD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 1</scenarioName>\n            <testCaseName>RDI-1.1b</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 1 RDI-1.1b</userName>\n        <initiatorPatientId>CAN20000037</initiatorPatientId>\n        <patientDocument>\n            <responderHCIDCode>1</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.RI1.101.00037.11111</documentUniqueId>\n        </patientDocument>\n        <patientDocument>\n            <responderHCIDCode>1</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.RI1.101.00037.22222</documentUniqueId>\n        </patientDocument>\n        <patientDocument>\n            <responderHCIDCode>1</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.RI1.101.00037.33333</documentUniqueId>\n        </patientDocument>\n    </patientRD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2002, 15, 'Scenario 5 PDR-4.3', '00005', NULL, '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataPD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 5</scenarioName>\n            <testCaseName>PDR-4.3</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 5 PDR-4.3</userName>\n        <patientId>RI1.101.00005</patientId>\n        <patientPrefix>Mrs</patientPrefix>\n        <patientLastName>Williams</patientLastName>\n        <patientGivenName>Heather</patientGivenName>\n        <patientGender>F</patientGender>\n        <patientDateOfBirth>19700525</patientDateOfBirth>\n        <patientSsn>666660005</patientSsn>\n        <patientTel>tel:+1-904-900-3444</patientTel>\n        <patientStreetAddress>4000 Minor St</patientStreetAddress>\n        <patientCity>Jacksonville</patientCity>\n        <patientState>FL</patientState>\n        <patientZip>32099</patientZip>\n    </patientPD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2002, 41, 'Scenario 5 QDR-4.4a', '00005', '1.CAN.200.00005.11111', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientQD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataQD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 5</scenarioName>\n            <testCaseName>QDR-4.4a</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 5 QDR-4.4a</userName>\n        <initiatorPatientId>RI1.101.00005</initiatorPatientId>\n        <responderPatient>\n            <responderPatientId>CAN20000005</responderPatientId>\n        </responderPatient>\n        <documentParams>\n            <creationTimeInd>N</creationTimeInd>\n            <creationTimeFrom>03/20/2007</creationTimeFrom>\n            <creationTimeTo>05/20/2010</creationTimeTo>\n            <serviceStartTimeInd>Y</serviceStartTimeInd>\n            <serviceStartTimeFrom>06/20/2008</serviceStartTimeFrom>\n            <serviceStartTimeTo>08/20/2008</serviceStartTimeTo>\n            <serviceStopTimeInd>N</serviceStopTimeInd>\n            <serviceStopTimeFrom>02/20/2007</serviceStopTimeFrom>\n            <serviceStopTimeTo>04/20/2007</serviceStopTimeTo>\n            <classCodeInd>N</classCodeInd>\n            <classCodeList>\n                <classCode>34133-9^^2.16.840.1.113883.6.1</classCode>\n            </classCodeList>\n            <statusInd>Y</statusInd>\n            <statusList>\n                <status>urn:oasis:names:tc:ebxml-regrep:StatusType:Approved</status>\n            </statusList>\n            <statusList>\n                <status>urn:oasis:names:tc:ebxml-regrep:StatusType:DeferredCreation</status>\n            </statusList>\n        </documentParams>\n    </patientQD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2002, 72, 'Scenario 5 RDR-3.1', '00005', '1.CAN.200.00005.11111', '1', NULL, 'Y', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientRD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataRD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 5</scenarioName>\n            <testCaseName>RDR-3.1</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <!-- AUTO-ATTACH TO RESULT FOR SUBSEQUENT COMPARISON TO SCENARIO 30 -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 5 RDR-3.1</userName>\n        <initiatorPatientId>RI1.101.00005</initiatorPatientId>\n        <patientDocument>\n            <responderHCIDCode>99</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.CAN20000005.11111</documentUniqueId>\n        </patientDocument>\n        <!-- NOT FOUND PER QUERY FOR DOCUMENT PARAMS\n        <patientDocument>\n            <responderHCIDCode>99</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.CAN20000005.22222</documentUniqueId>\n        </patientDocument>\n        -->\n    </patientRD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2003, 1, NULL, '00047', NULL, '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataPD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 29</scenarioName>\n            <testCaseName>PDI-1.1c</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 29 PDI-1.1c</userName>\n        <patientId>CAN20000047</patientId>\n        <patientPrefix></patientPrefix>\n        <patientLastName>Winchester</patientLastName>\n        <patientGivenName>Robert</patientGivenName>\n        <patientGender>M</patientGender>\n        <patientDateOfBirth>19660208</patientDateOfBirth>\n        <patientSsn></patientSsn>\n        <patientTel></patientTel>\n        <patientStreetAddress></patientStreetAddress>\n        <patientCity></patientCity>\n        <patientState></patientState>\n        <patientZip></patientZip>\n    </patientPD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2003, 27, NULL, '00047', '1.RI1.101.00047.11111~~1.RI1.101.00047.22222~~1.RI1.101.00047.33333~~1.RI1.101.00047.44444', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientQD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataQD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 29</scenarioName>\n            <testCaseName>QDI-1.1</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 29 QDI-1.1</userName>\n        <initiatorPatientId>CAN20000047</initiatorPatientId>\n        <responderPatient>\n            <responderPatientId>RI1.101.00047</responderPatientId>\n        </responderPatient>\n        <documentParams>\n            <creationTimeInd>N</creationTimeInd>\n            <creationTimeFrom>03/20/2007</creationTimeFrom>\n            <creationTimeTo>05/20/2010</creationTimeTo>\n            <serviceStartTimeInd>N</serviceStartTimeInd>\n            <serviceStartTimeFrom>01/20/2008</serviceStartTimeFrom>\n            <serviceStartTimeTo>02/20/2008</serviceStartTimeTo>\n            <serviceStopTimeInd>N</serviceStopTimeInd>\n            <serviceStopTimeFrom>02/20/2008</serviceStopTimeFrom>\n            <serviceStopTimeTo>03/20/2008</serviceStopTimeTo>\n            <classCodeInd>N</classCodeInd>\n            <classCodeList>\n                <classCode>34133-9^^2.16.840.1.113883.6.1</classCode>\n            </classCodeList>\n            <statusInd>Y</statusInd>\n            <statusList>\n                <status>urn:oasis:names:tc:ebxml-regrep:StatusType:Approved</status>\n            </statusList>\n        </documentParams>\n    </patientQD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2003, 65, NULL, '00047', '1.RI1.101.00047.11111', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientRD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataRD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 29</scenarioName>\n            <testCaseName>RDI-2.3a</name>\n            <initiatorInd>Y</initiatorInd>\n            <responderInd>N</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>CANDIDATE</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>1</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 29 RDI-2.3a</userName>\n        <initiatorPatientId>CAN20000047</initiatorPatientId>\n        <!-- VALID DOCUMENT UNIQUE ID - DOCUMENT CONTENT FORMAT INVALID -->\n        <patientDocument>\n            <responderHCIDCode>1</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.RI1.101.00047.11111</documentUniqueId>\n        </patientDocument>\n    </patientRD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2003, 9998, NULL, '00047', NULL, '0', NULL, 'N', NULL, NULL, NULL);
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2004, 74, 'Scenario 30 RDR-3.3', '00005', '1.CAN.200.00005.11111', '1', NULL, 'Y', 5, 41, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientRD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataRD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 30</scenarioName>\n            <testCaseName>RDR-3.3</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <!-- ATTEMPT TO RETRIEVE DOCUMENT UNIQUE ID AGAIN - EXPECT EXACT SAME DOCUMENT RETURNED - AUTO-ATTACH TO RESULT -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 30 RDR-3.3</userName>\n        <initiatorPatientId>RI1.101.00005</initiatorPatientId>\n        <patientDocument>\n            <responderHCIDCode>99</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.CAN20000005.11111</documentUniqueId>\n        </patientDocument>\n        -->\n    </patientRD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2005, 21, 'Scenario 45 PDR-5.7', '00043', NULL, '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataPD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 45</scenarioName>\n            <testCaseName>PDR-5.7</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 45 PDR-5.7</userName>\n        <patientId>RI1.101.00043</patientId>\n        <patientPrefix>Mr</patientPrefix>\n        <patientLastName>Brown</patientLastName>\n        <patientGivenName>Charles</patientGivenName>\n        <patientGender>M</patientGender>\n        <patientDateOfBirth>19831010</patientDateOfBirth>\n        <patientSsn>666660043</patientSsn>\n        <patientTel>tel:+1-987-633-1256</patientTel>\n        <patientStreetAddress>12 Anne Lane</patientStreetAddress>\n        <patientCity>Lancaster</patientCity>\n        <patientState>PA</patientState>\n        <patientZip>17601</patientZip>\n    </patientPD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2005, 47, 'Scenario 45 QDR-5.1a', '00043', '1.CAN.200.00043.11111', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientQD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataQD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 45</scenarioName>\n            <testCaseName>QDR-5.1a</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 45 QDR-5.1a</userName>\n        <initiatorPatientId>RI1.101.00043</initiatorPatientId>\n        <responderPatient>\n            <responderPatientId>CAN20000043</responderPatientId>\n        </responderPatient>\n        <documentParams>\n            <creationTimeInd>N</creationTimeInd>\n            <creationTimeFrom>03/20/2007</creationTimeFrom>\n            <creationTimeTo>05/20/2010</creationTimeTo>\n            <serviceStartTimeInd>N</serviceStartTimeInd>\n            <serviceStartTimeFrom>01/20/2007</serviceStartTimeFrom>\n            <serviceStartTimeTo>03/20/2007</serviceStartTimeTo>\n            <serviceStopTimeInd>N</serviceStopTimeInd>\n            <serviceStopTimeFrom>02/20/2007</serviceStopTimeFrom>\n            <serviceStopTimeTo>04/20/2007</serviceStopTimeTo>\n            <classCodeInd>N</classCodeInd>\n            <classCodeList>\n                <classCode>34133-9^^2.16.840.1.113883.6.1</classCode>\n            </classCodeList>\n            <statusInd>Y</statusInd>\n            <statusList>\n                <status>urn:oasis:names:tc:ebxml-regrep:StatusType:Deprecated</status>\n            </statusList>\n        </documentParams>\n    </patientQD>');
INSERT INTO `scenariocase` (`scenarioId`, `caseId`, `userName`, `patientId`, `documentIds`, `participatingRIs`, `successCriteria`, `autoAttachInd`, `dependentScenarioId`, `dependentCaseId`, `config`) VALUES (2005, 72, 'Scenario 45 RDR-3.1', '00043', '1.CAN.200.00043.11111', '1', NULL, 'N', NULL, NULL, '<?xml version="1.0" encoding="UTF-8"?>\n    <patientRD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="PatientDataRD.xsd">\n        <!--\n        <scenarioCase>\n            <scenarioName>Scenario 45</scenarioName>\n            <testCaseName>RDR-3.1</name>\n            <initiatorInd>N</initiatorInd>\n            <responderInd>Y</responderInd>\n            <ssnHandlingInd>N</ssnHandlingInd>\n        </scenarioCase>\n        <initiatorGateway>1</initiatorGateway>\n        <respondingGateway>\n            <testHarnessId>CANDIDATE</testHarnessId>\n        </respondingGateway>\n        -->\n        <userFamilyName>Testcase</userFamilyName>\n        <userGivenName>Interop</userGivenName>\n        <userInitials>IT</userInitials>\n        <userName>Scenario 45 RDR-3.1</userName>\n        <initiatorPatientId>RI1.101.00043</initiatorPatientId>\n        <patientDocument>\n            <responderHCIDCode>99</responderHCIDCode>\n            <repositoryUniqueId>1</repositoryUniqueId>\n            <documentUniqueId>1.CAN20000043.11111</documentUniqueId>\n        </patientDocument>\n    </patientRD>');

COMMIT;

UPDATE `scenariocase` SET `dependentScenarioId`=2001, `dependentCaseId`=1 WHERE `scenarioId`='2001' and`caseId`='27';

UPDATE `scenariocase` SET `dependentScenarioId`=2001, `dependentCaseId`=27 WHERE `scenarioId`='2001' and`caseId`='85';

UPDATE `scenariocase` SET `dependentScenarioId`=2002, `dependentCaseId`=15 WHERE `scenarioId`='2002' and`caseId`='41';

UPDATE `scenariocase` SET `dependentScenarioId`=2002, `dependentCaseId`=41 WHERE `scenarioId`='2002' and`caseId`='72';

UPDATE `scenariocase` SET `dependentScenarioId`=2003, `dependentCaseId`=1 WHERE `scenarioId`='2003' and`caseId`='27';

UPDATE `scenariocase` SET `dependentScenarioId`=2003, `dependentCaseId`=27 WHERE `scenarioId`='2003' and`caseId`='65';

UPDATE `scenariocase` SET `dependentScenarioId`=2002, `dependentCaseId`=41 WHERE `scenarioId`='2004' and`caseId`='74';

UPDATE `scenariocase` SET `dependentScenarioId`=2005, `dependentCaseId`=21 WHERE `scenarioId`='2005' and`caseId`='47';

UPDATE `scenariocase` SET `dependentScenarioId`=2005, `dependentCaseId`=47 WHERE `scenarioId`='2005' and`caseId`='72';

COMMIT;

-- ILT-320 - End ------------------------------------



-- ILT-313 - Start ------------------------------------


CREATE TABLE `transaction` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `statuscode` int(11) DEFAULT NULL,
  `msgtype` varchar(64) DEFAULT NULL,
  `time` datetime DEFAULT NULL,
  `rule` varchar(255) DEFAULT NULL,
  `method` varchar(50) DEFAULT NULL,
  `path` varchar(1000) DEFAULT NULL,
  `client` varchar(255) DEFAULT NULL,
  `server` varchar(255) DEFAULT NULL,
  `contenttype` varchar(100) DEFAULT NULL,
  `contentlength` int(11) DEFAULT NULL,
  `duration` int(11) DEFAULT NULL,
  `msgfilepath` varchar(255) DEFAULT NULL,
  `msgheader` blob,
  `msg` longblob,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1



-- ILT-313 - End ------------------------------------
